{"version":3,"sources":["components/Lookup.js","utils/useWindowSize.js","components/Chart.js","components/Panel.js","components/Result.js","components/Cards.js","App.js","reportWebVitals.js","index.js"],"names":["Lookup","lookup","form","hasGraph","RangePicker","DatePicker","style","width","marginTop","name","autoComplete","Item","id","rules","required","marginBottom","placeholder","locale","zhCN","format","type","htmlType","onClick","bind","moment","getWindowSize","window","innerWidth","height","innerHeight","useWindowSize","useState","windowSize","setWindowSize","useEffect","handleResize","addEventListener","removeEventListener","Chart","data","end","current","longTerm","shortTerm","handleAvg","handleLog","isLog","handleWindow","calculateMA","dayCount","result","i","len","length","push","sum","j","toFixed","transData","price","map","item","Math","log","longTermAvg","shortTermAvg","upColor","downColor","filteredData","key","slice","fontStyle","fontSize","direction","size","display","alignItems","paddingTop","lineHeight","paddingBottom","paddingLeft","flexDirection","justifyContent","marginRight","title","min","max","defaultValue","onChange","option","animation","grid","top","left","right","tooltip","trigger","borderWidth","borderColor","axisPointer","link","xAxisIndex","label","backgroundColor","xAxis","date","scale","gridIndex","axisLabel","show","yAxis","splitLine","dataZoom","start","visualMap","seriesIndex","dimension","pieces","value","color","series","itemStyle","color0","undefined","borderColor0","markPoint","coord","yAxisIndex","volumeColor","smooth","lineStyle","opacity","set_option","echarts","TitleComponent","TooltipComponent","GridComponent","DatasetComponent","TransformComponent","BarChart","LabelLayout","UniversalTransition","CanvasRenderer","LineChart","Panel","next","prev","buy","sell","strategies","index","className","Result","funds","shares","totalFunds","originFunds","singleRet","rets","handleBack","handleStrategy","strategyRes","precision","valueStyle","textAlign","prefix","bordered","dataSource","filter","calc","arrs","ave","arr","reduce","a","b","upside","downside","renderItem","border","Group","Button","marginLeft","Cards","handleAdd","handleRemove","strategyName","React","useRef","strategyDetail","gridColumn","gridRow","e","target","textIndent","rows","PlusOutlined","flexWrap","fontWeight","extra","href","MinusCircleOutlined","dec","code","unescape","c","String","fromCharCode","charCodeAt","App","initVal","minDuration","apiToken","ticks","buyPrice","isLogAxis","strategyId","Form","useForm","stockList","setStockList","val","setVal","axios","post","then","sList","items","hasOwnProperty","ret","subTitle","getFieldsValue","stock_code","date_diff","diff","params","ts_code","end_date","start_date","subtract","toPost","tick","recentAdj","parseFloat","p","reverse","volume","parseInt","dur","checked","detail","splice","strategy_id","sharesToBuy","floor","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1c702e8d.chunk.js","sourcesContent":["import React from \"react\";\r\nimport moment from 'moment';\r\nimport zhCN from 'antd/lib/locale/zh_CN';\r\nimport 'moment/locale/zh-cn'; // Make the text in picker chinese\r\nimport 'antd/dist/antd.css';\r\nimport { ConfigProvider, DatePicker, Form, Input, Button, Space} from 'antd';\r\nimport { PlusOutlined, MinusCircleOutlined } from '@ant-design/icons';\r\nimport { Field } from \"rc-field-form\";\r\nimport TextArea from \"rc-textarea\";\r\n\r\nmoment.locale('zh-cn')\r\n\r\n\r\n\r\nexport default function Lookup({lookup, form, hasGraph}) {\r\n\r\n    const { RangePicker } = DatePicker;\r\n  \r\n    if (!hasGraph) {\r\n        return(\r\n            <div style={{width: '90%', marginTop: '10%'}}>\r\n                <Form\r\n                    name='lookup'\r\n                    autoComplete=\"off\"\r\n                    form={form}\r\n                >\r\n                    \r\n                <Form.Item\r\n                    id=\"code\"\r\n                    name=\"stock_code\"\r\n                    rules={[{ required: true }]}\r\n                    style={{marginBottom: '1vw'}}\r\n                >   \r\n                    <Input placeholder=\"股票代码\"/>\r\n                </Form.Item>\r\n                \r\n                <ConfigProvider locale={zhCN}>\r\n                    <Form.Item \r\n                    name=\"date\"\r\n                    style={{marginBottom: '1vw'}}\r\n                    >\r\n                    <RangePicker\r\n                        format=\"YYYY-MM-DD\"\r\n                        style={{width: '100%'}}\r\n                        />\r\n                    </Form.Item>\r\n                </ConfigProvider>\r\n\r\n\r\n                <Form.Item>\r\n                    <Button type=\"primary\" htmlType=\"submit\" onClick={lookup.bind(null, form)} style={{width: '100%'}}>\r\n                    开始\r\n                    </Button>\r\n                </Form.Item>\r\n            \r\n                </Form>\r\n            </div>\r\n        );\r\n    } else {\r\n        return \"\"\r\n    }\r\n  }\r\n  ","import { useState, useEffect } from 'react';\r\n\r\nfunction getWindowSize() {\r\n  const { innerWidth: width, innerHeight: height } = window;\r\n  return {\r\n    width,\r\n    height\r\n  };\r\n}\r\n\r\nexport default function useWindowSize() {\r\n  const [windowSize, setWindowSize] = useState(getWindowSize());\r\n\r\n  useEffect(() => {\r\n    function handleResize() {\r\n        setWindowSize(getWindowSize());\r\n    }\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  return windowSize;\r\n}","// 引入 echarts 核心模块，核心模块提供了 echarts 使用必须要的接口。\r\nimport * as echarts from 'echarts/core';\r\n\r\n// import * as echarts from 'echarts';\r\n// 引入柱状图图表，图表后缀都为 Chart\r\nimport { BarChart, LineChart } from 'echarts/charts';\r\n// 引入提示框，标题，直角坐标系，数据集，内置数据转换器组件，组件后缀都为 Component\r\nimport {\r\n  TitleComponent,\r\n  TooltipComponent,\r\n  GridComponent,\r\n  DatasetComponent,\r\n  DatasetComponentOption,\r\n  TransformComponent\r\n} from 'echarts/components';\r\n// 标签自动布局，全局过渡动画等特性\r\nimport { LabelLayout, UniversalTransition } from 'echarts/features';\r\n// 引入 Canvas 渲染器，注意引入 CanvasRenderer 或者 SVGRenderer 是必须的一步\r\nimport { CanvasRenderer } from 'echarts/renderers';\r\n\r\nimport React from 'react';\r\nimport ReactECharts from 'echarts-for-react';\r\n\r\nimport { InputNumber, Space, Switch } from 'antd';\r\nimport useWindowSize from '../utils/useWindowSize';\r\n\r\n\r\n// 注册必须的组件\r\necharts.use([\r\n  TitleComponent,\r\n  TooltipComponent,\r\n  GridComponent,\r\n  DatasetComponent,\r\n  TransformComponent,\r\n  BarChart,\r\n  LabelLayout,\r\n  UniversalTransition,\r\n  CanvasRenderer,\r\n  LineChart\r\n]);\r\n\r\n\r\nexport default function Chart({ data, end, window, hasGraph, current, longTerm, shortTerm, handleAvg, handleLog, isLog, handleWindow }){\r\n\r\n    const { width } = useWindowSize();\r\n\r\n    function calculateMA(dayCount, data) {\r\n        var result = [];\r\n        for (var i = 0, len = data.length; i < len; i++) {\r\n          if (i < dayCount) {\r\n            result.push('-');\r\n            continue;\r\n          }\r\n          var sum = 0;\r\n          for (var j = 0; j < dayCount; j++) {\r\n            sum += data[i - j];\r\n          }\r\n          result.push(+(sum / dayCount).toFixed(3));\r\n        }\r\n        return result;\r\n      }\r\n\r\n\r\n\r\n    if (hasGraph) {\r\n\r\n        var transData = {...data}\r\n        if (isLog) {\r\n            transData.price = transData.price.map(\r\n                (item) => {\r\n                    return item.map((i) => Math.log(i))\r\n                }\r\n            )\r\n        }\r\n    \r\n        transData = {\r\n            ...transData,\r\n            longTermAvg: calculateMA(longTerm, transData.price.map((item) => item[1])),\r\n            shortTermAvg: calculateMA(shortTerm, transData.price.map((item) => item[1]))\r\n        }\r\n  \r\n        const upColor = '#ec0000';\r\n        const downColor =  '#00da3c';\r\n    \r\n        var filteredData = {\r\n            'title': transData['title'],\r\n            'longTerm': longTerm,\r\n            'shortTerm': shortTerm\r\n        }\r\n        for (var key in transData) {\r\n            if (key !== 'title'){\r\n                filteredData[key] = transData[key].slice(end-window>0 ? end-window: 0, end);\r\n            }\r\n        }\r\n        filteredData['volumeColor'] = []\r\n        for (var i = 0; i < filteredData['price'].length; i++) {\r\n            filteredData['volumeColor'].push([i, filteredData['volume'][i], filteredData['price'][i][0]<=filteredData['price'][i][1] ? 1: -1])\r\n        }\r\n        \r\n        \r\n        const set_option = (data) => {\r\n            \r\n            return {\r\n            animation: false,\r\n    \r\n            // title: {\r\n            //     left: 'center',\r\n            //     text: data.title,\r\n            //     top: '10%'\r\n            // },\r\n    \r\n            grid: [\r\n                {\r\n                    height: '58%',\r\n                    top: '12%',\r\n                    left: '5%',\r\n                    right: '5%',\r\n                },\r\n                {\r\n                    top: '78%',\r\n                    height: '10%',\r\n                    left: '5%',\r\n                    right: '5%',\r\n                }\r\n            ],\r\n    \r\n            tooltip: {\r\n                trigger: 'axis',\r\n                borderWidth: 1,\r\n                borderColor: '#ccc',\r\n                axisPointer: {\r\n                type: 'cross'\r\n                },\r\n            },\r\n    \r\n            // make tooltip include every axis\r\n            axisPointer: {\r\n                link: [\r\n                {\r\n                    xAxisIndex: 'all'\r\n                }\r\n                ],\r\n                label: {\r\n                    backgroundColor: '#777'\r\n                }\r\n            },\r\n    \r\n            xAxis: [\r\n                {\r\n                    type: 'category', \r\n                    data: data.date,\r\n                    scale: true\r\n                },\r\n        \r\n                {\r\n                    type: 'category', \r\n                    gridIndex: 1,\r\n                    data: data.date,\r\n                    axisLabel: { show: false },\r\n                    scale: true\r\n    \r\n                },\r\n        \r\n            ],\r\n        \r\n            yAxis: [\r\n                {\r\n                    scale: true, //不显示0坐标\r\n                    splitLine: { show: false } //不显示分割线\r\n                },\r\n                {\r\n                    scale: false,\r\n                    gridIndex: 1,\r\n                    axisLabel: { show: false },\r\n                    splitLine: { show: false }\r\n                },\r\n            ],\r\n    \r\n            dataZoom: [\r\n                {\r\n                    type: 'inside',\r\n                    xAxisIndex: [0, 1],\r\n                    start: 50,\r\n                    end: 100\r\n                },\r\n                {\r\n                    show: true,\r\n                    xAxisIndex: [0, 1],\r\n                    type: 'slider',\r\n                    top: '92%',\r\n                    start: 50,\r\n                    end: 100\r\n                }\r\n            ],\r\n    \r\n            visualMap: {\r\n                show: false,\r\n                seriesIndex: 1, // control the volume color\r\n                dimension: 2,\r\n                pieces: [\r\n                {\r\n                    value: 1,\r\n                    color: upColor\r\n                },\r\n                {\r\n                    value: -1,\r\n                    color: downColor\r\n                }\r\n                ]\r\n            },\r\n        \r\n            series: [\r\n                {\r\n                    name:'价格',\r\n                    type: 'k',\r\n                    data: data.price,\r\n                    itemStyle: {\r\n                        color: upColor,\r\n                        color0: downColor,\r\n                        borderColor: undefined,\r\n                        borderColor0: undefined\r\n                    },\r\n                    markPoint: function() {\r\n                        if(end===current){\r\n                        return {\r\n                            data: [{\r\n                            name: 'current',\r\n                            coord: [data.date[data.date.length-1], data.price[data.price.length-1][3]*1.01],\r\n                            value: '交易日',\r\n                            itemStyle: {\r\n                                color: function(){\r\n                                if(data.price[data.price.length-1][0]<=data.price[data.price.length-1][1]){\r\n                                    return upColor\r\n                                } else {\r\n                                    return downColor\r\n                                }\r\n                                }()\r\n                            }\r\n                            }]\r\n                        }\r\n                        }\r\n                    }()\r\n    \r\n                    \r\n                },\r\n\r\n                {\r\n                    name: '成交量',\r\n                    type: 'bar',\r\n                    xAxisIndex: 1,\r\n                    yAxisIndex: 1,\r\n                    data: data.volumeColor,\r\n                },\r\n\r\n                {\r\n                    name: 'MA'+shortTerm.toFixed(0),\r\n                    type: 'line',\r\n                    data: data.shortTermAvg,\r\n                    smooth: true,\r\n                    xAxisIndex: 0,\r\n                    yAxisIndex: 0,\r\n                    lineStyle: {\r\n                        opacity: 0.5,\r\n                    }\r\n                },\r\n\r\n                {\r\n                    name: 'MA'+longTerm.toFixed(0),\r\n                    type: 'line',\r\n                    data: data.longTermAvg,\r\n                    smooth: true,\r\n                    lineStyle: {\r\n                        opacity: 0.5,\r\n                    }\r\n                },\r\n\r\n\r\n            ]\r\n            }\r\n        \r\n        }\r\n\r\n        const fontStyle = {\r\n            fontSize: width > 900 ? '12px' : '8px',\r\n        }\r\n        \r\n        return (\r\n            <div>\r\n                <Space \r\n                    direction='horizontal' \r\n                    size='large'\r\n                    style={{\r\n                        display: 'flex', \r\n                        alignItems: 'center',\r\n                        paddingTop: '2%',\r\n                        lineHeight: '3vh',\r\n                        paddingBottom: '0',\r\n                        width: '100%',\r\n                        // height: '10vh',\r\n                        paddingLeft: '15%',\r\n                        // backgroundColor:'red'\r\n                    }}\r\n                >\r\n                    \r\n                    <div style={{\r\n                            display: 'flex', \r\n                            flexDirection: width > 900 ? 'row' : 'column', \r\n                            justifyContent: 'space-between', \r\n                            alignItems: width > 900 ? 'center' : 'flex-start',\r\n                            width: width > 900 ? '60vw' : '100vw',\r\n                        }}>\r\n                        <div style={{...fontStyle, marginRight: '2vh'}}><label>股票：<b>{data.title}</b></label></div>\r\n                        <div>\r\n                            <label style={fontStyle}>短均线周期：</label>\r\n                            <InputNumber min={2} max={500} defaultValue={shortTerm} size=\"small\" style={{width: '12vh'}} onChange={handleAvg.bind(null, 'short')}/>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label style={fontStyle}>长均线周期：</label>\r\n                            <InputNumber min={5} max={1000} defaultValue={longTerm} size=\"small\" style={{width: '12vh'}} onChange={handleAvg.bind(null, 'long')}/>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label style={fontStyle}>显示周期: </label>\r\n                            <InputNumber min={30} max={500} defaultValue={window} size=\"small\" style={{width: '12vh'}} onChange={handleWindow}/>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label style={{...fontStyle, marginRight: '1vh'}}>对数坐标轴</label>\r\n                            <Switch onChange={handleLog}/>\r\n                        </div>\r\n                    </div>\r\n                    \r\n\r\n                </Space>\r\n                <ReactECharts \r\n                    option={set_option(filteredData)}\r\n                    style={{\r\n                        height: width > 900 ? '32vw' : '500px',\r\n                        paddingTop: '0',\r\n                        marginTop: '0',\r\n                    }}\r\n                />\r\n            </div>\r\n        )\r\n\r\n        } else {\r\n        return \"\"\r\n        }\r\n  \r\n  }","import React from 'react';\r\nimport { Button,Tooltip } from 'antd';\r\nimport './Panel.css';\r\n\r\nconst Panel = ( {next, prev, buy, sell, hasGraph, strategies } ) => {\r\n\r\n    if (hasGraph) {\r\n      return (\r\n        <div>\r\n            {strategies.map((item,index)=><Tooltip title={item[1]}>\r\n            <Button type=\"primary\" className='button' key={index} onClick={buy.bind(null, index)}>买：{item[0]}</Button></Tooltip>)}\r\n            <Button type=\"primary\" className='button' onClick={sell}>卖出</Button>\r\n            <Button type=\"primary\" className='button' style={{opacity: 0.7}} onClick={prev}>前一天</Button>\r\n            <Button type=\"primary\" className='button' style={{opacity: 0.7}}onClick={next}>后一天</Button>\r\n        </div>\r\n      )\r\n    } else {\r\n      return \"\"\r\n    }\r\n  \r\n  };\r\n\r\nexport default Panel;","import React from 'react';\r\n\r\nimport { Statistic, List, Button, Radio } from 'antd';\r\nimport { color } from 'echarts/core';\r\nimport './Result.css';\r\n\r\n\r\nexport default function Result( {funds, shares, hasGraph, totalFunds, originFunds, singleRet, rets, handleBack, strategies, handleStrategy, strategyRes} ){\r\n    \r\n    if(hasGraph){\r\n  \r\n        return (\r\n            <div style={{width: '90%'}}>\r\n\r\n                <Statistic title={<span style={{color: 'white'}}>账户总市值</span>} value={totalFunds} precision={2} \r\n                    valueStyle={{lineHeight:'2vw', color:'white'}} style={{marginBottom:'8%', paddingTop:'10%', textAlign:'center'}}\r\n                    prefix='￥'/>\r\n\r\n            \r\n                <List\r\n                    size = 'small'\r\n                    bordered = {true}\r\n                    // style = {{\r\n                    //     border: '1px solid red'\r\n                    // }}\r\n                    dataSource={[\r\n                    {\r\n                        title: '现金余额: ',\r\n                        value: funds.toFixed(2)\r\n                    },\r\n                    {\r\n                        title: '持股数: ',\r\n                        value: shares.toFixed(0)\r\n                    },\r\n                    {\r\n                        title: '总回报率: ',\r\n                        value: ((totalFunds / originFunds -1)*100).toFixed(2) + '%'\r\n                    },\r\n                    {\r\n                        title: '单次回报率: ',\r\n                        value: (singleRet*100).toFixed(2) + '%'\r\n                    },\r\n                    {\r\n                        title: '交易次数: ',\r\n                        value: function(){\r\n                            if (strategyRes=='all'){\r\n                                return rets.length.toFixed(0)\r\n                            } else {\r\n                                return rets.filter(item => item[1]==strategyRes).length.toFixed(0)\r\n                            }\r\n                        }()\r\n                    },\r\n                    {\r\n                        title: '胜率: ',\r\n                        value: function(){\r\n\r\n                            const calc = arrs => arrs.length>0 ? (arrs.filter(item => item[0]>0).length / arrs.length *100).toFixed(2) + '%': \"\"\r\n\r\n                            if (strategyRes=='all'){\r\n                                return calc(rets)\r\n                            } else {\r\n                                return calc(rets.filter(item => item[1]==strategyRes))\r\n                            }\r\n                        }()\r\n                    },\r\n                    {\r\n                        title: '平均赔率: ',\r\n                        value: function(){\r\n                            const ave = arr => arr.reduce((a, b) => a + b, 0) / arr.length\r\n\r\n                            const calc = (arrs) => {\r\n                                if(arrs.length>0){\r\n                                    var upside = arrs.filter(item => item[0]>0).length>0 ? ave(arrs.filter(item => item[0]>0).map(item=>item[0])) : 0.\r\n                                    var downside = arrs.filter(item => item[0]<=0).length>0 ? -ave(arrs.filter(item => item[0]<=0).map(item=>item[0])) : 0.\r\n                                    if(upside>0 && downside >0){\r\n                                        return (upside / downside).toFixed(2)\r\n                                    } else {\r\n                                        return \"\"\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            \r\n                            if (strategyRes=='all'){\r\n                                return calc(rets)\r\n                            } else {\r\n                                return calc(rets.filter(item => item[1]==strategyRes))\r\n                            }\r\n\r\n\r\n                        //     if(rets.length>0){\r\n                        //         var upside = rets.filter(item => item>0).length>0 ? ave(rets.filter(item => item>0)) : 0.\r\n                        //         var downside = rets.filter(item => item<=0).length>0 ? -ave(rets.filter(item => item<=0)) : 0.\r\n                        //         if(upside>0 && downside >0){\r\n                        //         return (upside / downside).toFixed(2)\r\n                        //         }\r\n                        //     }\r\n                        // return \"\"\r\n                        }()\r\n                    },\r\n                    ]}\r\n                    // bordered\r\n                    renderItem={item => (\r\n                    <List.Item style={{display: 'flex', lineHeight:'1vw', color:'white', border: '1px', backgroundColor: 'rgba(255, 255, 255, 0.1)'}} key={item.title}>\r\n                        <span>{item.title}</span>\r\n                        <b>{item.value}</b>\r\n                    </List.Item>\r\n                    )}\r\n                />,\r\n\r\n                <Radio.Group onChange={handleStrategy} \r\n                    defaultValue = 'all'\r\n                    size='small' style={{width:'100%', justifyContent:'center', display:'flex', border:'none'}}>\r\n                    <Radio.Button value='all' className='radio'>全部</Radio.Button>\r\n                    {strategies.map(item=><Radio.Button value={item} className='radio'>{item}</Radio.Button>)}\r\n                </Radio.Group>\r\n\r\n\r\n                <Button type=\"primary\"  style={{width: '50%', marginLeft:'25%', marginTop: '8vh'}} onClick={handleBack}>\r\n                    返回\r\n                </Button>\r\n            </div>\r\n        )\r\n        } else {\r\n        return \"\"\r\n        }\r\n  }","import React from 'react';\r\nimport { Card, Input, Button } from 'antd';\r\nimport { PlusOutlined, MinusCircleOutlined } from '@ant-design/icons';\r\nimport \"./Cards.css\"\r\nimport TextArea from 'rc-textarea';\r\n\r\nexport default function Cards({ hasGraph, strategies, handleAdd, handleRemove }) {\r\n\r\n    const strategyName = React.useRef('')\r\n    const strategyDetail = React.useRef('')\r\n\r\n    if (!hasGraph) {\r\n        return(\r\n            <>\r\n                <div className='inputArea'>\r\n                    <Input placeholder='策略名称' style={{gridColumn: '3/7', gridRow: '2/3', }} onChange={(e)=>{strategyName.current=e.target.value}}/>\r\n                    <TextArea placeholder='策略描述' style={{gridColumn: '3/7', gridRow: '3/8', textIndent: '1vh'}} rows={5} onChange={(e)=>{strategyDetail.current=e.target.value}}/>\r\n                    <Button type=\"primary\" style={{gridColumn: '7/8', gridRow: '5/6', width: '3vw'}} onClick={()=>{\r\n                        handleAdd(strategyName.current, strategyDetail.current)\r\n                    }}><PlusOutlined/></Button>\r\n                </div>\r\n                <div style={{height: '60vh', display:'flex', justifyContent:'flex-start', flexWrap: 'wrap', alignItems:'flex-start'}}>\r\n                    {strategies.map((item, index) => (\r\n                        <Card size=\"small\" title={<h3 style={{fontWeight: 'bold'}}>{item[0]}</h3>} id={index} key={index} extra={<a href=\"#\">\r\n                            <MinusCircleOutlined onClick={()=>{handleRemove(index)}}/></a>} className='cards'>\r\n                            <p>{item[1]}</p>\r\n                        </Card>\r\n                    ))}\r\n                </div>\r\n\r\n            </>\r\n        );\r\n    } else {\r\n        return \"\"\r\n    }\r\n  }\r\n  ","import React from 'react';\nimport './App.css';\nimport './Grid.css';\nimport { PageHeader, Form } from 'antd';\nimport axios from 'axios';\nimport Lookup from './components/Lookup';\nimport Chart from './components/Chart';\nimport Panel from './components/Panel';\nimport Result from './components/Result';\nimport Cards from './components/Cards';\n\n// function enc(code) {\n//   var c=String.fromCharCode(code.charCodeAt(0)+code.length);\n//   for(var i=1;i<code.length;i++){\n//       c+=String.fromCharCode(code.charCodeAt(i)+code.charCodeAt(i-1));\n//   }\n//   return(escape(c));\n// }\n\nfunction dec(code) {\n  code=unescape(code);\n  var c=String.fromCharCode(code.charCodeAt(0)-code.length);\n  for(var i=1;i<code.length;i++){\n      c+=String.fromCharCode(code.charCodeAt(i)-c.charCodeAt(i-1));\n  }\n  return c;\n}\n\n\nconst App = () => {\n\n  const initVal = {\n    minDuration: 300,\n    apiToken: dec('kh%96%C7%9C%9A%96%93%C3%99h%94%C5%C7%97%93%C4%C9%CC%9Fjg%9C%9Ekgh%95%91%60%93%95%94%C3%91ek%9A%9D%9E%9Dij%9B%C8%9Dllkj%9C%96ipjj'),\n    ticks: {},\n    window: 60,\n    current: 60,\n    end: 60,\n    funds: 100000.,\n    totalFunds: 100000.,\n    originFunds: 100000.,\n    shares: 0,\n    hasGraph: false,\n    singleRet: 0.,\n    rets: [],\n    buyPrice: 0.,\n    longTerm: 50,\n    shortTerm: 10,\n    isLogAxis: false,\n    strategyId: 0,\n    strategies: [\n      ['突破','从底部整理区域放量上攻'],\n      ['回调','股票走到相对低点买入'],\n      ['均线','快速均线上穿慢速均线'],\n    ],\n    strategyRes: 'all'\n  }\n\n  const [form] = Form.useForm();\n  const [stockList, setStockList] = React.useState({});\n  const [val, setVal] = React.useState({...initVal});\n\n  React.useEffect(()=>{\n    axios.post('https://api.tushare.pro', {\n      \"api_name\": \"stock_basic\",\n      \"token\": val.apiToken,\n    })\n    .then(({data})=>{\n      var sList = {};\n      for (var i of data.data.items) {\n        sList[i[1]] = {\n          'name': i[2],\n          'list_date': i[6]\n        };\n      }\n      setStockList(sList)\n    })\n  }, [])\n\n\n  React.useEffect(\n    ()=>{\n      if (val.ticks.hasOwnProperty('price')){\n        setVal({...val, hasGraph: true})\n      } else {\n        setVal({...val, hasGraph: false})\n      }\n    }, [val.ticks]\n  )\n\n  React.useEffect(\n    ()=>{\n      if (val.hasGraph) {\n        const price = val.ticks['price'][val.current-1][1]\n        const totalFunds = val.funds + val.shares * price\n        const ret = price / val.buyPrice - 1\n        if (val.buyPrice !== 0.){\n          setVal({...val, totalFunds: totalFunds, singleRet: ret})\n        } else {\n          setVal({...val, totalFunds: totalFunds})\n        }\n      }\n    }, [val.current]\n  )\n\n  React.useEffect(\n    ()=>{\n      if (val.hasGraph) {\n        const price = val.ticks['price'][val.current-1][1]\n        const totalFunds = val.funds + val.shares * price\n        const ret = price / val.buyPrice - 1\n        setVal({...val, totalFunds: totalFunds})\n        if (val.buyPrice !== 0.){\n          setVal({...val, totalFunds: totalFunds, singleRet: ret})\n        } else {\n          setVal({...val, totalFunds: totalFunds})\n        }\n      }\n    }, [val.current]\n  )\n\n\n  const handleLookup = (form) => {\n\n    var { stock_code, date } = form.getFieldsValue();\n    if (stockList.hasOwnProperty(stock_code)) {\n\n      var date_diff = date[1].diff(date[0], 'days')\n      date_diff = date_diff <= val.minDuration ? val.minDuration: date_diff\n  \n      const params = {\n        ts_code: stock_code[0]=='6'?stock_code+'.SH':stock_code+'.SZ',\n        end_date: date[1].format(\"YYYYMMDD\"),\n        start_date: date[1].subtract(date_diff, 'days').format(\"YYYYMMDD\")\n      };\n  \n      const toPost = {\n        \"api_name\": \"daily\",\n        \"token\": val.apiToken,\n        \"params\": params,\n        \"fields\": \"\"\n      };\n  \n      axios.post('https://api.tushare.pro', toPost)\n        .then(({data}) => {\n          var tick = data\n          axios.post('https://api.tushare.pro', {...toPost, \"api_name\": \"adj_factor\"}).then(\n            ({data}) => {\n              const recentAdj = parseFloat(data.data.items[0][2]);\n              if (data.data.length == tick.data.length) {\n                const p = tick.data\n                const strategies = val.strategies\n                setVal({...initVal, strategies: strategies,\n                  ticks: {\n                  code: p.items[0][0],\n                    price: p.items.map((item, index) => [\n                      parseFloat(item[2]) / recentAdj * parseFloat(data.data.items[index][2]),\n                      parseFloat(item[5]) / recentAdj * parseFloat(data.data.items[index][2]),\n                      parseFloat(item[4]) / recentAdj * parseFloat(data.data.items[index][2]),\n                      parseFloat(item[3]) / recentAdj * parseFloat(data.data.items[index][2])\n                  ]).reverse(),\n                  volume: p.items.map(item => parseInt(item[10])).reverse(),\n                  date: p.items.map(item => item[1]).reverse(),\n                  title: stockList[stock_code]['name']\n                }});  \n              };\n            }\n          )\n        })\n    }\n\n  }\n\n  const handleAvgWindow = (type, dur) => {\n    if (type == 'long') {\n      setVal({...val, longTerm: dur})\n    } else if (type == 'short') {\n      setVal({...val, shortTerm: dur})\n    } else {\n      return\n    }\n  };\n\n  const handleNext = () => {\n    const end = val.end + 1\n    if (val.end === val.current) {\n      const current = val.current + 1\n      setVal({...val, \n        current: current,\n        end:end\n      });\n    } else {\n      setVal({...val, end:end})\n    }\n  }\n\n  const handleBack = () => {\n    setVal({...val, hasGraph: false})\n  }\n\n  const handlePrev = () => {\n    if (val.end - val.window > 0) {\n      const end = val.end - 1\n      setVal({...val, end: end});\n    }\n  }\n\n\n  const handleBuy = (strategy_id) => {\n\n    if (val.shares === 0) {\n      const price = val.ticks['price'][val.current-1][1]\n      const sharesToBuy = Math.floor(val.funds / (price * 100)) * 100\n      const funds = val.funds - sharesToBuy*price\n      setVal({...val, \n        funds: funds,\n        shares: sharesToBuy,\n        buyPrice: price,\n        strategyId: strategy_id\n      })\n    }\n  }\n\n  const handleSell = () => {\n    if (val.shares !== 0) {\n      const funds = val.totalFunds\n      const rets = [...val.rets, [val.singleRet, val.strategies[val.strategyId][0]]]\n      setVal({...val, \n        funds: funds,\n        shares: 0,\n        singleRet: 0.,\n        rets: rets,\n        buyPrice: 0.,\n        strategyId: 0\n      })\n    }\n  }\n\n  const handleStrategyRes = (e) => {\n    setVal({...val, strategyRes: e.target.value})\n  }\n\n  const handleAddStrategy = (name, detail) => {\n    const strategies = [...val.strategies, [name, detail]]\n    setVal({...val, strategies: strategies})\n  }\n\n  const handleRemoveStrategy = (id) => {\n    var strategies = val.strategies\n    strategies.splice(id, 1)\n    setVal({...val, strategies: strategies})\n  }\n\n  return (\n    <div className='main_grid'>\n      <div className='header'>\n        <PageHeader\n          // onBack={() => null}\n          title= {<h3 style={{color: 'rgb(24, 144, 255)'}}>Trading Pit</h3>}\n          subTitle={<span style={{color: 'lightgrey'}}>Practice works</span>}\n        />\n      </div>\n\n      <div className='lookup'>\n        <Lookup \n          lookup = {handleLookup}\n          form = {form}\n          hasGraph = {val.hasGraph}\n        />\n      </div>\n\n      <div className='result'>\n        <Result funds={val.funds} shares={val.shares} hasGraph={val.hasGraph} totalFunds={val.totalFunds} \n          originFunds={val.originFunds} singleRet={val.singleRet} rets={val.rets} handleBack={handleBack} \n          strategies={val.strategies.map(item=>item[0])} handleStrategy={handleStrategyRes} strategyRes={val.strategyRes}\n        />\n      </div>\n\n      <div className='graph' id='chart'>\n        <Chart data={val.ticks} end={val.end} window={val.window} hasGraph={val.hasGraph} \n          current={val.current} handleAvg={handleAvgWindow} longTerm={val.longTerm} shortTerm={val.shortTerm}\n          handleLog={(checked)=>{setVal({...val, isLogAxis: checked})}} isLog={val.isLogAxis}\n          handleWindow={(window)=>{setVal({...val, window: window})}}\n          />\n\n        <Cards hasGraph={val.hasGraph} strategies={val.strategies} handleAdd={handleAddStrategy} handleRemove={handleRemoveStrategy}\n          />\n      </div>\n\n      <div className='panel'>\n        <Panel \n          next={handleNext} \n          prev={handlePrev}\n          buy={handleBuy}\n          sell={handleSell}\n          hasGraph={val.hasGraph}\n          strategies={val.strategies}\n        />\n      </div>\n      \n    </div>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  // <React.StrictMode>\n  <App />,\n  // </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}